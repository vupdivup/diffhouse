{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>diffhouse is a Python solution for structuring Git metadata, designed to enable large-scale codebase analysis at practical speeds.</p> <p>Key features are:</p> <ul> <li>\ud83d\ude80 Fast access to commit data, file changes and more</li> <li>\ud83d\udcca Easy integration with pandas and Polars</li> <li>\ud83d\udc0d Simple-to-use Python interface</li> </ul>"},{"location":"#performance","title":"Performance","text":"<p> Processing times for tween.js. Lower is better. </p> <p>For more details, see benchmarks.</p>"},{"location":"#requirements","title":"Requirements","text":"Python 3.10 or higher Git 2.22 or higher <p>Git also needs to be added to the system PATH.</p>"},{"location":"#limitations","title":"Limitations","text":"<p>At its core, diffhouse is a data extraction tool and therefore does not calculate software metrics like code churn or cyclomatic complexity; if this is needed, take a look at PyDriller instead.</p>"},{"location":"benchmarks/","title":"Benchmarks","text":"<p>This document benchmarks diffhouse against PyDriller, a popular Python-based repository mining tool. Benchmarks were run with pyperf on GitHub Actions runners running Ubuntu 24.04.</p> <p>Please note the following caveats:</p> <ul> <li>Repositories vary greatly in content and structure, so these benchmarks are intended as general performance indicators rather than definitive results.</li> <li>Each run executes <code>git clone</code>, so runtimes may fluctuate due to network speed and can introduce additional sampling noise.</li> </ul> <p>In all charts, lower is better.</p>"},{"location":"benchmarks/#mid-sized-repositories","title":"Mid-Sized Repositories<sup>1</sup>","text":"<p>We used the 1,000-commit tween.js repo as a representative case. diffhouse was 2x+ faster overall; commit extraction took about 75% less time than PyDriller.</p> <p> tweenjs/tween.js </p>"},{"location":"benchmarks/#large-codebases","title":"Large Codebases<sup>2</sup>","text":"<p>For the repo with ~10k commits, PyDriller slowed down significantly, while diffhouse kept a good pace, leading to major runtime improvements.</p> <p> scrapy/scrapy </p>"},{"location":"benchmarks/#binary-stores","title":"Binary Stores<sup>3</sup>","text":"<p>For repositories with lots of binary content, the gap narrowed; the speedup gained via diffhouse was less than 2x.</p> <p> sqlparser/sqlflow_public </p>"},{"location":"benchmarks/#tiny-projects","title":"Tiny Projects<sup>4</sup>","text":"<p>Small repos finish in a few seconds with either tool; PyDriller is still slower, but only slightly.</p> <p> microsoft/Detours </p> <ol> <li> <p>tweenjs/tween.js benchmark run \u21a9</p> </li> <li> <p>scrapy/scrapy benchmark run \u21a9</p> </li> <li> <p>sqlparser/sqlflow_public benchmark run \u21a9</p> </li> <li> <p>microsoft/Detours benchmark run \u21a9</p> </li> </ol>"},{"location":"user-guide/","title":"User Guide","text":"<p>This guide aims to cover the basic use cases of diffhouse. For a full list of objects, consider reading the API Reference.</p>"},{"location":"user-guide/#installation","title":"Installation","text":"<p>Install diffhouse from PyPI:</p> <pre><code>pip install diffhouse\n</code></pre>"},{"location":"user-guide/#optional-dependencies","title":"Optional Dependencies","text":"<p>If you plan to combine diffhouse with pandas or Polars, install the package with their respective extras:</p> pandas <code>pip install diffhouse[pandas]</code> Polars <code>pip install diffhouse[polars]</code>"},{"location":"user-guide/#quickstart","title":"Quickstart","text":"<pre><code>from diffhouse import Repo\n\nwith Repo('https://github.com/user/repo') as r:\n    for c in r.commits:\n        print(c.commit_hash[:10], c.date, c.author_email)\n\n    if len(r.branches.to_list()) &gt; 100:\n        print('\ud83c\udf89')\n\n    df = r.diffs.to_pandas()\n</code></pre> <p>To start, create a <code>Repo</code> instance by passing either a Git-hosting URL or a local path as its <code>source</code> argument. Next, use the <code>Repo</code> in a <code>with</code> statement to clone the source into a local, non-persistent location.</p> <p>Inside the <code>with</code> block, you can access data through the following properties:</p> Property Description Record Type <code>Repo.commits</code> Commit history of the repository. <code>Commit</code> <code>Repo.filemods</code> File modifications across the commit history. <code>FileMod</code> <code>Repo.diffs</code> Source code changes across the commit history. <code>Diff</code> <code>Repo.branches</code> Branches of the repository. <code>Branch</code> <code>Repo.tags</code> Tags of the repository. <code>Tag</code>"},{"location":"user-guide/#querying-results","title":"Querying Results","text":"<p>Data accessors like <code>Repo.commits</code> are <code>Extractor</code> objects and can output their results in various formats:</p>"},{"location":"user-guide/#looping-through-objects","title":"Looping Through Objects","text":"<p>You can use extractors in a <code>for</code> loop to process objects one by one. Data will be extracted on demand for memory efficiency:</p> <pre><code>with Repo('https://github.com/user/repo') as r:\n    for c in r.commits:\n        print(c.commit_hash[:10])\n        print(c.author_name)\n\n        if c.in_main:\n            break\n</code></pre> <p><code>iter_dicts()</code> is a <code>for</code> loop alternative that yields dictionaries instead of diffhouse objects. A good use case for this is writing results into a newline-delimited JSON file:</p> <pre><code>import json\n\nwith (\n    Repo('https://github.com/user/repo') as r,\n    open('commits.jsonl', 'w') as f\n):\n    for c in r.commits.iter_dicts():\n        f.write(json.dumps(c) + '\\n')\n</code></pre>"},{"location":"user-guide/#converting-to-dataframes","title":"Converting to Dataframes","text":"<p>pandas and Polars <code>DataFrame</code> APIs are supported out of the box. To convert result sets to dataframes, call the following methods:</p> <ul> <li><code>to_pandas()</code> or <code>pd()</code> for pandas</li> <li><code>to_polars()</code> or <code>pl()</code> for Polars</li> </ul> <pre><code>with Repo('https://github.com/user/repo') as r:\n    df1 = r.filemods.to_pandas()  # pandas\n    df2 = r.diffs.to_polars()  # Polars\n</code></pre>"},{"location":"user-guide/#preliminary-filtering","title":"Preliminary Filtering","text":"<p>You can filter data along certain dimensions before processing takes place to reduce extraction time and/or network load.</p> <p>Note</p> <p>Filters are a WIP feature. Additional options like date and branch filtering are planned for future releases.</p>"},{"location":"user-guide/#skipping-file-downloads","title":"Skipping File Downloads","text":"<p>If no blob-level data is needed, pass <code>blobs=False</code> when creating the <code>Repo</code> to skip file downloads during cloning. Note that this will not populate:</p> <ul> <li><code>files_changed</code>, <code>lines_added</code> and <code>lines_deleted</code> fields of <code>Repo.commits</code></li> <li><code>Repo.filemods</code></li> <li><code>Repo.diffs</code></li> </ul> <pre><code>with Repo('https://github.com/user/repo', blobs=False) as r:\n    for b in r.branches:\n        pass  # business as usual\n\n    r.filemods  # throws FilterError\n</code></pre>"},{"location":"reference/","title":"Reference","text":"<p>This section contains detailed information about classes and functions of the public API. The following objects are described:</p> <ul> <li><code>Repo</code></li> <li><code>Extractor</code></li> <li><code>Commit</code></li> <li><code>FileMod</code></li> <li><code>Diff</code></li> <li><code>Branch</code></li> <li><code>Tag</code></li> <li><code>GitObject</code></li> </ul>"},{"location":"reference/branch/","title":"Branch","text":"<p>               Bases: <code>GitObject</code></p> <p>A branch in the repository.</p>"},{"location":"reference/branch/#diffhouse.Branch.name","title":"name","text":"<pre><code>name: str\n</code></pre> <p>Name of the branch.</p>"},{"location":"reference/commit/","title":"Commit","text":"<p>               Bases: <code>GitObject</code></p> <p>A commit from the repository history.</p>"},{"location":"reference/commit/#diffhouse.Commit.commit_hash","title":"commit_hash","text":"<pre><code>commit_hash: str\n</code></pre> <p>Full hash of the commit.</p>"},{"location":"reference/commit/#diffhouse.Commit.date","title":"date","text":"<pre><code>date: datetime\n</code></pre> <p>Date and time when the commit was applied, in UTC.</p>"},{"location":"reference/commit/#diffhouse.Commit.date_local","title":"date_local","text":"<pre><code>date_local: datetime\n</code></pre> <p>Date and time when the commit was applied, in local time.</p>"},{"location":"reference/commit/#diffhouse.Commit.message_subject","title":"message_subject","text":"<pre><code>message_subject: str\n</code></pre> <p>Commit message subject.</p>"},{"location":"reference/commit/#diffhouse.Commit.message_body","title":"message_body","text":"<pre><code>message_body: str\n</code></pre> <p>Commit message body.</p>"},{"location":"reference/commit/#diffhouse.Commit.author_name","title":"author_name","text":"<pre><code>author_name: str\n</code></pre> <p>Author name.</p>"},{"location":"reference/commit/#diffhouse.Commit.author_email","title":"author_email","text":"<pre><code>author_email: str\n</code></pre> <p>Author email.</p>"},{"location":"reference/commit/#diffhouse.Commit.author_date","title":"author_date","text":"<pre><code>author_date: datetime\n</code></pre> <p>Date and time when the commit was authored, in UTC.</p>"},{"location":"reference/commit/#diffhouse.Commit.author_date_local","title":"author_date_local","text":"<pre><code>author_date_local: datetime\n</code></pre> <p>Date and time when the commit was authored, in local time.</p>"},{"location":"reference/commit/#diffhouse.Commit.committer_name","title":"committer_name","text":"<pre><code>committer_name: str\n</code></pre> <p>Committer name.</p>"},{"location":"reference/commit/#diffhouse.Commit.committer_email","title":"committer_email","text":"<pre><code>committer_email: str\n</code></pre> <p>Committer email.</p>"},{"location":"reference/commit/#diffhouse.Commit.files_changed","title":"files_changed","text":"<pre><code>files_changed: int | None\n</code></pre> <p>Number of files changed in the commit.</p> <p>The value of this attribute equals <code>None</code> if <code>blobs=False</code>.</p>"},{"location":"reference/commit/#diffhouse.Commit.lines_added","title":"lines_added","text":"<pre><code>lines_added: int | None\n</code></pre> <p>Number of lines inserted in the commit.</p> <p>The value of this attribute equals <code>None</code> if <code>blobs=False</code>.</p>"},{"location":"reference/commit/#diffhouse.Commit.lines_deleted","title":"lines_deleted","text":"<pre><code>lines_deleted: int | None\n</code></pre> <p>Number of lines deleted in the commit.</p> <p>The value of this attribute equals <code>None</code> if <code>blobs=False</code>.</p>"},{"location":"reference/commit/#diffhouse.Commit.source","title":"source","text":"<pre><code>source: str\n</code></pre> <p>The original branch that produced the commit.</p>"},{"location":"reference/commit/#diffhouse.Commit.in_main","title":"in_main","text":"<pre><code>in_main: bool\n</code></pre> <p>Whether the commit is in the default branch's history.</p>"},{"location":"reference/commit/#diffhouse.Commit.is_merge","title":"is_merge","text":"<pre><code>is_merge: bool\n</code></pre> <p>Whether the commit is a merge commit.</p>"},{"location":"reference/commit/#diffhouse.Commit.parents","title":"parents","text":"<pre><code>parents: list[str]\n</code></pre> <p>List of parent commit hashes.</p>"},{"location":"reference/diff/","title":"Diff","text":"<p>               Bases: <code>GitObject</code></p> <p>Changes made to a hunk of code in a specific commit.</p>"},{"location":"reference/diff/#diffhouse.Diff.commit_hash","title":"commit_hash","text":"<pre><code>commit_hash: str\n</code></pre> <p>Full hash of the commit.</p>"},{"location":"reference/diff/#diffhouse.Diff.path_a","title":"path_a","text":"<pre><code>path_a: str\n</code></pre> <p>Path to the file before applying the commit's changes.</p>"},{"location":"reference/diff/#diffhouse.Diff.path_b","title":"path_b","text":"<pre><code>path_b: str\n</code></pre> <p>Path to the file after applying the commit's changes.</p> <p>Differs from <code>path_a</code> for renames and copies.</p>"},{"location":"reference/diff/#diffhouse.Diff.filemod_id","title":"filemod_id","text":"<pre><code>filemod_id: str\n</code></pre> <p>Hash of <code>commit_hash</code>, <code>path_a</code>, and <code>path_b</code>.</p> <p>Use it to match with a <code>FileMod</code>.</p>"},{"location":"reference/diff/#diffhouse.Diff.start_a","title":"start_a","text":"<pre><code>start_a: int\n</code></pre> <p>Line number that starts the hunk in file version A.</p>"},{"location":"reference/diff/#diffhouse.Diff.length_a","title":"length_a","text":"<pre><code>length_a: int\n</code></pre> <p>Line count of the hunk in file version A.</p>"},{"location":"reference/diff/#diffhouse.Diff.start_b","title":"start_b","text":"<pre><code>start_b: int\n</code></pre> <p>Line number that starts the hunk in file version B.</p>"},{"location":"reference/diff/#diffhouse.Diff.length_b","title":"length_b","text":"<pre><code>length_b: int\n</code></pre> <p>Line count of the hunk in file version B.</p>"},{"location":"reference/diff/#diffhouse.Diff.lines_added","title":"lines_added","text":"<pre><code>lines_added: int\n</code></pre> <p>Number of lines added.</p>"},{"location":"reference/diff/#diffhouse.Diff.lines_deleted","title":"lines_deleted","text":"<pre><code>lines_deleted: int\n</code></pre> <p>Number of lines deleted.</p>"},{"location":"reference/diff/#diffhouse.Diff.additions","title":"additions","text":"<pre><code>additions: list[str]\n</code></pre> <p>Text content of added lines.</p>"},{"location":"reference/diff/#diffhouse.Diff.deletions","title":"deletions","text":"<pre><code>deletions: list[str]\n</code></pre> <p>Text content of deleted lines.</p>"},{"location":"reference/extractor/","title":"Extractor","text":"<p>               Bases: <code>Generic[T]</code></p> <p>Extraction interface for mining a set of Git objects.</p> <p>Supports data streaming and converting results into various formats, including native Python representations and data analysis interfaces.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.__iter__","title":"__iter__","text":"<pre><code>__iter__() -&gt; Iterator[T]\n</code></pre> <p>Extract and iterate over Git objects.</p> <p>Items are processed on demand for memory efficiency.</p> <p>Yields:</p> Type Description <code>T</code> <p>Extracted Git objects.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.iter_dicts","title":"iter_dicts","text":"<pre><code>iter_dicts() -&gt; Iterator[dict]\n</code></pre> <p>Extract and iterate over Git objects as dictionaries.</p> <p>Items are processed on demand for memory efficiency.</p> <p>Yields:</p> Type Description <code>dict</code> <p>Dictionary representations of Git objects.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.to_pandas","title":"to_pandas","text":"<pre><code>to_pandas() -&gt; DataFrame\n</code></pre> <p>Extract data into a pandas DataFrame.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>A pandas DataFrame containing the results.</p> <p>Raises:</p> Type Description <code>ImportError</code> <p>If pandas is not installed.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.pd","title":"pd","text":"<pre><code>pd() -&gt; DataFrame\n</code></pre> <p>Shorthand for <code>to_pandas()</code>.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.to_polars","title":"to_polars","text":"<pre><code>to_polars() -&gt; DataFrame\n</code></pre> <p>Extract data into a Polars DataFrame.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>A Polars DataFrame containing the results.</p> <p>Raises:</p> Type Description <code>ImportError</code> <p>If Polars is not installed.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.pl","title":"pl","text":"<pre><code>pl() -&gt; DataFrame\n</code></pre> <p>Shorthand for <code>to_polars()</code>.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.to_list","title":"to_list","text":"<pre><code>to_list() -&gt; list[T]\n</code></pre> <p>Extract data into a list.</p> <p>Returns:</p> Type Description <code>list[T]</code> <p>A list containing the extracted Git objects.</p>"},{"location":"reference/extractor/#diffhouse.Extractor.to_dicts","title":"to_dicts","text":"<pre><code>to_dicts() -&gt; list[dict]\n</code></pre> <p>Extract data into a list of dictionaries.</p> <p>Returns:</p> Type Description <code>list[dict]</code> <p>A list of dictionaries representing the extracted Git objects.</p>"},{"location":"reference/filemod/","title":"FileMod","text":"<p>               Bases: <code>GitObject</code></p> <p>A file modification in a specific commit.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.commit_hash","title":"commit_hash","text":"<pre><code>commit_hash: str\n</code></pre> <p>Full hash of the commit.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.path_a","title":"path_a","text":"<pre><code>path_a: str\n</code></pre> <p>Path to the file before applying the commit's changes.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.path_b","title":"path_b","text":"<pre><code>path_b: str\n</code></pre> <p>Path to the file after applying the commit's changes.</p> <p>Differs from <code>path_a</code> for renames and copies.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.filemod_id","title":"filemod_id","text":"<pre><code>filemod_id: str\n</code></pre> <p>Unique record identifier hashed from <code>commit_hash</code>, <code>path_a</code>, and <code>path_b</code>.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.change_type","title":"change_type","text":"<pre><code>change_type: str\n</code></pre> <p>Single-letter code representing the change type.</p> <p>Most commonly one of <code>A</code> (added), <code>C</code> (copied), <code>D</code> (deleted), <code>M</code> (modified) or <code>R</code> (renamed). See git-status for all possible values.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.similarity","title":"similarity","text":"<pre><code>similarity: int\n</code></pre> <p>Similarity index between the two file versions.</p> <p><code>0</code>-<code>100</code> for renames and copies, <code>100</code> otherwise.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.lines_added","title":"lines_added","text":"<pre><code>lines_added: int\n</code></pre> <p>Number of lines added to the file in the commit.</p>"},{"location":"reference/filemod/#diffhouse.FileMod.lines_deleted","title":"lines_deleted","text":"<pre><code>lines_deleted: int\n</code></pre> <p>Number of lines deleted from the file in the commit.</p>"},{"location":"reference/git-object/","title":"GitObject","text":"<p>Base class for Git entities.</p>"},{"location":"reference/git-object/#diffhouse.GitObject.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict\n</code></pre> <p>Convert the object to a dictionary.</p> <p>Returns:</p> Type Description <code>dict</code> <p>A dictionary representation of the Git object.</p>"},{"location":"reference/repo/","title":"Repo","text":"<p>Wrapper around a Git repository.</p> <p>This class is the main entry point for mining repositories with diffhouse. When used in a <code>with</code> statement, it creates a non-persistent clone of the target repository from which data can be extracted.</p> <p>Examples:</p> <pre><code>with Repo('https://github.com/user/repo') as r:\n    for c in r.commits:\n        print(c.commit_hash[:10], c.date, c.author_email)\n\n    if len(r.branches.to_list()) &gt; 100:\n        print('\ud83c\udf89')\n\n    df = r.diffs.to_pandas()\n</code></pre>"},{"location":"reference/repo/#diffhouse.Repo.__init__","title":"__init__","text":"<pre><code>__init__(source: str, blobs: bool = True)\n</code></pre> <p>Initialize the repository.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>str</code> <p>URL or local path pointing to a Git repository.</p> required <code>blobs</code> <code>bool</code> <p>Whether to download file contents.</p> <code>True</code>"},{"location":"reference/repo/#diffhouse.Repo.commits","title":"commits","text":"<pre><code>commits: Extractor[Commit]\n</code></pre> <p>Commit history of the repository.</p> <p>Holds one record per commit.</p>"},{"location":"reference/repo/#diffhouse.Repo.filemods","title":"filemods","text":"<pre><code>filemods: Extractor[FileMod]\n</code></pre> <p>File modifications across the commit history.</p> <p>Holds one record per modified file per commit. Note that this property is unavailable if <code>blobs=False</code>.</p>"},{"location":"reference/repo/#diffhouse.Repo.diffs","title":"diffs","text":"<pre><code>diffs: Extractor[Diff]\n</code></pre> <p>Source code changes across the commit history.</p> <p>Holds one record per code chunk per file per commit. Note that this property is unavailable if <code>blobs=False</code>.</p>"},{"location":"reference/repo/#diffhouse.Repo.branches","title":"branches","text":"<pre><code>branches: Extractor[Branch]\n</code></pre> <p>Branches of the repository.</p>"},{"location":"reference/repo/#diffhouse.Repo.tags","title":"tags","text":"<pre><code>tags: Extractor[Tag]\n</code></pre> <p>Tag names of the repository.</p>"},{"location":"reference/repo/#diffhouse.Repo.source","title":"source","text":"<pre><code>source: str\n</code></pre> <p>Location where the repository was cloned from.</p> <p>Can either be a remote URL or a local file URI based on the original input.</p>"},{"location":"reference/repo/#diffhouse.Repo.clone","title":"clone","text":"<pre><code>clone() -&gt; Repo\n</code></pre> <p>Set up a temporary clone of the repository.</p> <p>This method is an alternative to <code>with</code> statements. Call <code>dispose()</code> to free up resources when done.</p> <p>Returns:</p> Type Description <code>Repo</code> <p>self</p>"},{"location":"reference/repo/#diffhouse.Repo.dispose","title":"dispose","text":"<pre><code>dispose() -&gt; None\n</code></pre> <p>Free up resources associated with the object.</p> <p>Only needed when <code>clone()</code> is used directly.</p>"},{"location":"reference/tag/","title":"Tag","text":"<p>               Bases: <code>GitObject</code></p> <p>A tag in the repository.</p>"},{"location":"reference/tag/#diffhouse.Tag.name","title":"name","text":"<pre><code>name: str\n</code></pre> <p>Name of the tag.</p>"}]}